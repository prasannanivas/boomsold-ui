/* Professional Montreal Real Estate Map - BoomSold Edition */

/* Animation for hover text */
@keyframes fadeIn {
  from {
    opacity: 0;
    transform: translateX(-50%) translateY(-10px);
  }

  to {
    opacity: 1;
    transform: translateX(-50%) translateY(0);
  }
}

@keyframes boomPulse {

  0%,
  100% {
    transform: scale(1);
  }

  50% {
    transform: scale(1.05);
  }
}

/* Main container - White Background for Logo Style */
.montreal-map-container {
  width: 100%;
  height: 100vh;
  background: linear-gradient(135deg,
      #FFFFFF 0%,
      #F8F8F8 35%,
      #FFFFFF 65%,
      #F8F8F8 100%);
  display: flex;
  flex-direction: column;
  font-family: 'DM Serif Text', 'Nunito', sans-serif;
  overflow: hidden;
  position: relative;
}

.selected-part-label {
  position: absolute;
  top: 12px;
  width: 100vw;
  text-align: center;
  z-index: 2000;
  font-size: 2rem;
  font-weight: 700;
  color: black;
  /*  #FFD700; */
  text-transform: uppercase;
  letter-spacing: 3px;
  font-family: 'DM Serif Display', sans-serif;
  /* text-shadow:
    5px 5px 0px #000000,
    -3px -3px 0px #000000,
    3px -3px 0px #000000,
    -3px 3px 0px #000000,
    0 0 30px rgba(255, 215, 0, 1),
    0 0 50px rgba(255, 215, 0, 0.9),
    0 0 70px rgba(255, 215, 0, 0.7),
    0 0 100px rgba(255, 215, 0, 0.5); */
  /* animation: partLabelGlow 2s ease-in-out infinite; */
  pointer-events: none;
  text-align: center;
}


mm-selected-part-label {
  position: fixed;
  top: 5%;
  width: 90vw;
  text-align: center;
  z-index: 2000;
  font-size: 3rem;
  font-weight: 700;
  color: black;
  /*  #FFD700; */
  text-transform: uppercase;
  letter-spacing: 10px;
  font-family: 'DM Serif Display', sans-serif;
  pointer-events: none;
  text-align: center;
}

@keyframes partLabelGlow {

  0%,
  100% {
    text-shadow:
      5px 5px 0px #000000,
      -3px -3px 0px #000000,
      3px -3px 0px #000000,
      -3px 3px 0px #000000,
      0 0 25px rgba(255, 215, 0, 0.9),
      0 0 45px rgba(255, 215, 0, 0.7),
      0 0 65px rgba(255, 215, 0, 0.5);
  }

  50% {
    text-shadow:
      5px 5px 0px #000000,
      -3px -3px 0px #000000,
      3px -3px 0px #000000,
      -3px 3px 0px #000000,
      0 0 40px rgba(255, 215, 0, 1),
      0 0 60px rgba(255, 215, 0, 0.95),
      0 0 90px rgba(255, 215, 0, 0.8),
      0 0 120px rgba(255, 215, 0, 0.6);
  }
}

.montreal-map-container::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background-image:
    radial-gradient(circle, rgba(0, 0, 0, 0.05) 1px, transparent 1px);
  background-size: 20px 20px;
  pointer-events: none;
  z-index: 0;
}

/* Professional Header - Comic Book Style */
.professional-header {
  background: linear-gradient(135deg,
      #000000 0%,
      #1a1a1a 50%,
      #000000 100%);
  color: #FFD700;
  padding: 6px 32px;
  box-shadow: 0 6px 24px rgba(0, 0, 0, 0.5),
    0 0 0 4px #FFD700,
    0 0 30px rgba(255, 215, 0, 0.4);
  z-index: 1000;
  position: relative;
  flex-shrink: 0;
  border-bottom: 4px solid #FFD700;
}

.professional-header::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background:
    repeating-linear-gradient(90deg,
      transparent,
      transparent 2px,
      rgba(255, 215, 0, 0.03) 2px,
      rgba(255, 215, 0, 0.03) 4px);
  pointer-events: none;
}

.header-content {
  display: flex;
  justify-content: center;
  align-items: center;
  max-width: 1400px;
  margin: 0 auto;
  position: relative;
  z-index: 1;
}

.brand-section {
  display: flex;
  align-items: center;
  justify-content: center;
}

.brand-logo {
  height: 45px;
  width: auto;
  filter: drop-shadow(0 2px 8px rgba(255, 215, 0, 0.3)) drop-shadow(0 0 20px rgba(255, 215, 0, 0.2));
  transition: all 0.3s ease;
}

.brand-logo:hover {
  filter: drop-shadow(0 4px 12px rgba(255, 215, 0, 0.5)) drop-shadow(0 0 30px rgba(255, 215, 0, 0.4));
  transform: scale(1.05);
}

/* Montreal Flag Banner - Above Map */
.montreal-flag-banner {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 16px;
  padding: 6px 24px;

  border-bottom: 3px solid #FFD700;
  box-shadow: 0 4px 12px rgba(160, 176, 14, 0.3);
  position: relative;
  z-index: 100;
}

.montreal-flag-banner::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: repeating-linear-gradient(90deg,
      transparent,
      transparent 2px,
      rgba(255, 215, 0, 0.03) 2px,
      rgba(255, 215, 0, 0.03) 4px);
  pointer-events: none;
}

.montreal-flag {
  height: 50px;
  width: 75px;
  border: 2px solid #FFFFFF;
  border-radius: 4px;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.4);
  transition: all 0.3s ease;
  position: relative;
  z-index: 1;
}

.montreal-flag:hover {
  transform: scale(1.1);
  box-shadow: 0 4px 16px rgba(0, 0, 0, 0.5);
}

.montreal-label {
  font-family: 'DM Serif Text', 'Nunito', sans-serif;
  font-size: 22px;
  font-weight: 700;
  color: #ffd900;
  letter-spacing: 3px;
  text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.7);
  position: relative;
  z-index: 1;
}

/* Professional Map Container */
.custom-montreal-map {
  flex: 1;
  position: relative;
  background: #f5f5f5;
  margin: 0;
  border-radius: 0;
  box-shadow: none;
  overflow: hidden;
  border: none;
  width: 100%;
}

.mm-custom-montreal-map {
  flex: 1;
  position: relative;
  background: #f5f5f5;
  margin: 0;
  border-radius: 0;
  box-shadow: none;
  overflow: hidden;
  border: none;
  width: 100%;
}

/* Professional Leaflet map styling */
.leaflet-container {
  background: transparent !important;
  font-family: 'DM Serif Text', 'Nunito', sans-serif;
  border-radius: 0;
  width: 100%;
  height: 100%;
}

/* Hide all tile layers */
.leaflet-tile-pane {
  display: none !important;
}

.leaflet-tile {
  display: none !important;
}

.leaflet-layer {
  opacity: 0 !important;
}

/* Ensure only GeoJSON layer is visible */
.leaflet-overlay-pane {
  opacity: 1 !important;
}

/* Enable borders for coordinate editing */
.leaflet-overlay-pane svg g path {
  stroke-linejoin: round !important;
  stroke-linecap: round !important;
}

/* Allow interactive elements to show borders */
.leaflet-interactive {
  stroke-linejoin: round !important;
  stroke-linecap: round !important;
}

/* Professional zoom controls */
.leaflet-control-zoom {
  border: none !important;
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15) !important;
  border-radius: 8px !important;
  overflow: hidden;
}

/* Position zoom controls for MontrealMap */
.mm-custom-montreal-map .leaflet-control-zoom {
  margin-top: 80px !important;
  /* Below back button */
  margin-left: 10px !important;
}

.leaflet-control-zoom a {
  background: rgba(30, 41, 59, 0.95) !important;
  color: #f8fafc !important;
  border: none !important;
  font-weight: 600 !important;
  backdrop-filter: blur(12px);
  transition: all 0.2s ease !important;
}

.leaflet-control-zoom a:hover {
  background: rgba(51, 65, 85, 0.95) !important;
  color: #60a5fa !important;
}

/* Professional Map Title Overlay */
.map-title-overlay {
  position: absolute;
  top: 24px;
  right: 24px;
  z-index: 1000;
  background: rgba(30, 41, 59, 0.95);
  backdrop-filter: blur(12px);
  padding: 12px 20px;
  border-radius: 8px;
  font-size: 14px;
  font-weight: 600;
  color: #f8fafc;
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);
  border: 1px solid rgba(255, 255, 255, 0.1);
  font-family: 'DM Serif Text', 'Nunito', sans-serif;
  letter-spacing: 0.025em;
}

/* Neighborhood labels with values - Bold Black Text with Yellow Glow */
.custom-tooltip {
  background: transparent !important;
  color: #000000 !important;
  font-weight: 900 !important;
  font-size: 12px !important;
  /* Base size, will be overridden dynamically */
  padding: 4px 8px !important;
  border: none !important;
  border-radius: 6px !important;
  text-align: center !important;
  box-shadow: none !important;
  white-space: nowrap !important;
  font-family: 'DM Serif Text', 'Nunito', sans-serif !important;
  text-shadow:
    0 0 8px rgba(255, 215, 0, 0.9),
    0 0 12px rgba(255, 215, 0, 0.8),
    1px 1px 2px rgba(0, 0, 0, 0.3) !important;
  transition: none !important;
  letter-spacing: 1.5px !important;
  text-transform: uppercase !important;
  pointer-events: none !important;
  will-change: font-size, opacity !important;
}

/* Part Label - Glowing Yellow Above Neighborhood */
.part-label {
  color: #FFD700 !important;
  font-weight: 900 !important;
  font-size: 0.65em !important;
  text-transform: uppercase !important;
  letter-spacing: 2px !important;
  margin-bottom: 0.15em !important;
  text-shadow:
    3px 3px 0px #000000,
    -2px -2px 0px #000000,
    2px -2px 0px #000000,
    -2px 2px 0px #000000,
    0 0 20px rgba(255, 215, 0, 0.9),
    0 0 30px rgba(255, 215, 0, 0.7),
    0 0 40px rgba(255, 215, 0, 0.5) !important;
  animation: partGlow 2s ease-in-out infinite !important;
  display: block !important;
}

@keyframes partGlow {

  0%,
  100% {
    text-shadow:
      3px 3px 0px #000000,
      -2px -2px 0px #000000,
      2px -2px 0px #000000,
      -2px 2px 0px #000000,
      0 0 15px rgba(255, 215, 0, 0.8),
      0 0 25px rgba(255, 215, 0, 0.6);
  }

  50% {
    text-shadow:
      3px 3px 0px #000000,
      -2px -2px 0px #000000,
      2px -2px 0px #000000,
      -2px 2px 0px #000000,
      0 0 25px rgba(255, 215, 0, 1),
      0 0 40px rgba(255, 215, 0, 0.9),
      0 0 55px rgba(255, 215, 0, 0.7);
  }
}

/* Neighborhood Label - Bold Black with Yellow Glow */
.neighborhood-label {
  color: #000000 !important;
  font-weight: 900 !important;
  display: block !important;
  text-shadow:
    0 0 8px rgba(255, 215, 0, 0.9),
    0 0 12px rgba(255, 215, 0, 0.8),
    0 0 16px rgba(255, 215, 0, 0.6),
    1px 1px 2px rgba(0, 0, 0, 0.3) !important;
}

/* Zoom-based font size and weight classes - Bolder and more visible */
.tooltip-zoom-6 {
  font-size: 5px !important;
  font-weight: 900 !important;
  opacity: 0.7 !important;
}

.tooltip-zoom-7 {
  font-size: 6px !important;
  font-weight: 900 !important;
  opacity: 0.75 !important;
}

.tooltip-zoom-8 {
  font-size: 7px !important;
  font-weight: 900 !important;
  opacity: 0.8 !important;
}

.tooltip-zoom-9 {
  font-size: 9px !important;
  font-weight: 900 !important;
  opacity: 0.85 !important;
}

.tooltip-zoom-10 {
  font-size: 11px !important;
  font-weight: 900 !important;
  opacity: 0.9 !important;
}

.tooltip-zoom-11 {
  font-size: 13px !important;
  font-weight: 900 !important;
  opacity: 0.95 !important;
}

.tooltip-zoom-12 {
  font-size: 15px !important;
  font-weight: 900 !important;
  opacity: 1 !important;
}

.tooltip-zoom-13 {
  font-size: 17px !important;
  font-weight: 900 !important;
  opacity: 1 !important;
}

.tooltip-zoom-14 {
  font-size: 19px !important;
  font-weight: 900 !important;
  opacity: 1 !important;
}

.tooltip-zoom-15 {
  font-size: 21px !important;
  font-weight: 900 !important;
  opacity: 1 !important;
}

.tooltip-zoom-16 {
  font-size: 24px !important;
  font-weight: 900 !important;
  opacity: 1 !important;
}

.tooltip-zoom-17 {
  font-size: 27px !important;
  font-weight: 900 !important;
  opacity: 1 !important;
}

.tooltip-zoom-18 {
  font-size: 30px !important;
  font-weight: 900 !important;
  opacity: 1 !important;
}

/* Legacy class for backward compatibility */
.neighborhood-label-tooltip {
  background: transparent !important;
  color: #ffffff !important;
  font-weight: 700 !important;
  font-size: 16px !important;
  padding: 0 !important;
  border: none !important;
  border-radius: 0 !important;
  text-align: center !important;
  box-shadow: none !important;
  white-space: nowrap !important;
  font-family: 'DM Serif Text', 'Nunito', sans-serif !important;
  text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.9),
    1px 1px 2px rgba(0, 0, 0, 0.8),
    0 0 8px rgba(0, 0, 0, 0.5) !important;
}

.neighborhood-label-tooltip::before {
  display: none !important;
}

/* Remove any base map tiles - only show neighborhoods on white */
/* .leaflet-tile-pane {
  display: none !important;
}

.leaflet-tile {
  display: none !important;
} */

/* Remove default leaflet controls styling */
.leaflet-control-zoom {
  border: none !important;
  box-shadow: 0 1px 5px rgba(0, 0, 0, 0.4) !important;
}

.leaflet-control-zoom a {
  background-color: #fff !important;
  color: #2d3436 !important;
  border: 1px solid #ccc !important;
}

.leaflet-control-zoom a:hover {
  background-color: #f4f4f4 !important;
}

/* Remove attribution */
.leaflet-control-attribution {
  display: none !important;
}

/* Responsive design for color palette */
@media (max-width: 768px) {
  .palette-items {
    gap: 10px;
  }

  .color-palette h3 {
    font-size: 16px;
  }

  .color-label {
    font-size: 11px;
  }
}

/* Neighborhood Projection Effect - Instantaneous */
.neighborhood-projected {
  transform: translate(0, -3px) !important;
  filter: drop-shadow(0 6px 12px rgba(0, 0, 0, 0.3)) !important;
  transition: none !important;
  z-index: 1000 !important;
  will-change: transform, filter !important;
}

/* SVG path hover effects */
.leaflet-interactive:hover {
  transform: translate(0, -3px);
  filter: drop-shadow(0 6px 12px rgba(0, 0, 0, 0.3));
  transition: none;
}

/* Enhanced hover state for better visual feedback */
.leaflet-interactive {
  transition: none;
  cursor: pointer;
  will-change: transform, filter;
}

/* Responsive Design */
@media (max-width: 768px) {
  .professional-header {
    padding: 12px 20px;
  }

  .header-content {
    flex-direction: column;
    gap: 16px;
    align-items: flex-start;
  }

  .brand-title {
    font-size: 24px;
  }

  .brand-subtitle {
    font-size: 12px;
  }

  .header-stats {
    gap: 20px;
  }

  .stat-value {
    font-size: 16px;
  }

  .custom-montreal-map {
    margin: 0;
    border-radius: 0;
  }

  .map-title-overlay {
    top: 16px;
    right: 16px;
    font-size: 12px;
    padding: 8px 16px;
  }

  .custom-montreal-map svg {
    height: 90vh;
  }

  .custom-montreal-map svg g {
    margin: 0;
    padding: 0;
  }

  .mm-custom-montreal-map svg {
    height: 90vh;
  }

  /* Reduce projection effect on mobile */
  .neighborhood-projected {
    transform: translate(0, -2px) !important;
    filter: drop-shadow(0 4px 8px rgba(0, 0, 0, 0.2)) !important;
  }

  .selected-part-label {
    font-size: 2rem;
    letter-spacing: 4px;
    top: 8%;
  }

  .montreal-flag-banner {
    padding: 4px 16px;
  }

  .montreal-flag {
    height: 35px;
    width: 52px;
  }

  .montreal-label {
    font-size: 16px;
    letter-spacing: 2px;
  }

  .brand-logo {
    height: 24px;
  }

  /* Tablet: Hide header */
  .professional-header {
    display: none !important;
  }

  /* Tablet: Reposition back button to avoid logo overlap */
  .montreal-map-container button[style*="Back to Parts"] {
    top: 15px !important;
    left: 15px !important;
    transform: none !important;
    font-size: 18px !important;
    padding: 10px !important;
    width: 40px !important;
    height: 40px !important;
    border-radius: 50% !important;
    min-width: 40px !important;
  }

  /* Hide text, keep only arrow on tablet */
  .montreal-map-container button[style*="Back to Parts"] span:last-child {
    display: none !important;
  }

  /* Make arrow bigger on tablet */
  .montreal-map-container button[style*="Back to Parts"] span:first-child {
    font-size: 22px !important;
  }

  /* Tablet: Reposition Filters button */
  .montreal-map-container button[style*="Filters"] {
    bottom: 25px !important;
    right: 25px !important;
    left: auto !important;
  }

  /* Adjust part label for tablet */
  .selected-part-label {
    top: 15px !important;
    font-size: 1.8rem !important;
  }
}

@media (max-width: 480px) {
  .montreal-map-container {
    height: 100vh;
    height: 100dvh;
  }

  /* Hide header on mobile */
  .professional-header {
    display: none !important;
  }

  .brand-logo {
    height: 20px;
  }

  .montreal-flag-banner {
    display: none !important;
  }

  .montreal-flag {
    height: 30px;
    width: 45px;
  }

  .montreal-label {
    font-size: 14px;
    letter-spacing: 1.5px;
  }

  .selected-part-label {
    font-size: 1.5rem;
    letter-spacing: 3px;
    top: 15px !important;
  }

  .custom-montreal-map {
    height: calc(100vh - 120px);
  }

  .mm-custom-montreal-map {
    height: 100vh;
  }

  .map-title-overlay {
    display: none;
    /* Hide on very small screens */
  }

  /* Adjust tooltip sizes for mobile */
  .tooltip-zoom-6 {
    font-size: 4px !important;
  }

  .tooltip-zoom-7 {
    font-size: 5px !important;
  }

  .tooltip-zoom-8 {
    font-size: 6px !important;
  }

  .tooltip-zoom-9 {
    font-size: 7px !important;
  }

  .tooltip-zoom-10 {
    font-size: 9px !important;
  }

  .tooltip-zoom-11 {
    font-size: 11px !important;
  }

  .tooltip-zoom-12 {
    font-size: 13px !important;
  }

  .tooltip-zoom-13 {
    font-size: 15px !important;
  }

  .tooltip-zoom-14 {
    font-size: 17px !important;
  }

  .tooltip-zoom-15 {
    font-size: 19px !important;
  }

  .tooltip-zoom-16 {
    font-size: 21px !important;
  }

  .tooltip-zoom-17 {
    font-size: 23px !important;
  }

  .tooltip-zoom-18 {
    font-size: 25px !important;
  }

  .part-label {
    font-size: 0.55em !important;
    letter-spacing: 1.5px !important;
  }

  /* Better touch targets */
  .leaflet-control-zoom a {
    width: 14px !important;
    height: 14px !important;
    line-height: 14px !important;
    font-size: 14px !important;
    border-radius: 50% !important;
  }

  /* Position zoom controls below back button on mobile */
  .mm-custom-montreal-map .leaflet-control-zoom {
    margin-top: 40vw !important;
    /* Below smaller back button */
    margin-left: 10px !important;
  }

  /* Mobile: Reposition back button to avoid logo overlap */
  .montreal-map-container button[style*="Back to Parts"] {
    top: 15px !important;
    left: 15px !important;
    transform: none !important;
    font-size: 18px !important;
    padding: 8px !important;
    width: 36px !important;
    height: 36px !important;
    border-radius: 50% !important;
    min-width: 36px !important;
  }

  /* Hide text, keep only arrow on mobile */
  .montreal-map-container button[style*="Back to Parts"] span:last-child {
    display: none !important;
  }

  /* Make arrow bigger */
  .montreal-map-container button[style*="Back to Parts"] span:first-child {
    font-size: 20px !important;
  }

  /* Mobile: Reposition Filters button to bottom-right */
  .montreal-map-container button[style*="Filters"] {
    bottom: 20px !important;
    right: 20px !important;
    left: auto !important;
    padding: 10px 18px !important;
    font-size: 14px !important;
    border-radius: 50px !important;
  }

  /* Mobile: Adjust filter panel position */
  .montreal-map-container>div[style*="position: fixed"][style*="bottom: 100px"] {
    bottom: 80px !important;
    right: 10px !important;
    left: auto !important;
    max-width: calc(100vw - 20px) !important;
    min-width: auto !important;
    width: calc(100vw - 20px) !important;
  }

  /* Adjust selected part label to avoid overlap */
  .selected-part-label {
    top: 15px !important;
    font-size: 1.2rem !important;
    letter-spacing: 2px !important;
  }

  /* Fix neighborhood label positioning on mobile - keep them within bounds */
  .custom-tooltip {
    font-size: 10px !important;
    max-width: 120px !important;
    text-align: center !important;
    word-wrap: break-word !important;
  }

  /* Ensure tooltips are centered properly on mobile */
  .leaflet-tooltip {
    margin-left: 0 !important;
    margin-top: 0 !important;
  }

  .leaflet-tooltip-top,
  .leaflet-tooltip-bottom,
  .leaflet-tooltip-left,
  .leaflet-tooltip-right {
    margin: 0 !important;
  }

  /* Reduce label sizes further on small screens */
  .tooltip-zoom-6,
  .tooltip-zoom-7,
  .tooltip-zoom-8 {
    font-size: 3px !important;
  }

  .tooltip-zoom-9,
  .tooltip-zoom-10 {
    font-size: 6px !important;
  }

  .tooltip-zoom-11,
  .tooltip-zoom-12 {
    font-size: 9px !important;
  }

  .tooltip-zoom-13,
  .tooltip-zoom-14 {
    font-size: 11px !important;
  }

  .tooltip-zoom-15,
  .tooltip-zoom-16,
  .tooltip-zoom-17,
  .tooltip-zoom-18 {
    font-size: 13px !important;
  }
}

/* Montreal Flag Color Animation - Starts after falling animation, faster fade */
.montreal-flag-colors {
  animation: montrealFlagToPrice 3s ease-in-out forwards;
}

@keyframes montrealFlagToPrice {
  0% {
    fill: #ED1B2E;
    /* Montreal flag red */
    fill-opacity: 0.9;
  }

  50% {
    fill: #ED1B2E;
    fill-opacity: 0.9;
  }

  100% {
    fill: var(--final-color);
    /* Transition to actual price color */
    fill-opacity: 0.8;
  }
}

/* White cross areas initial animation */
.montreal-white-cross {
  animation: crossToPrice 3s ease-in-out forwards;
}

@keyframes crossToPrice {
  0% {
    fill: #FFFFFF;
    /* Montreal flag white */
    fill-opacity: 0.9;
  }

  50% {
    fill: #FFFFFF;
    fill-opacity: 0.9;
  }

  100% {
    fill: var(--final-color);
    /* Transition to actual price color */
    fill-opacity: 0.8;
  }
}